<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Christmas Knit</title> 

<!-- for CreateJS and ZIMjs http://zimjs.com - free to modify - Dan Zen 2015 -->
<!-- see http://zimjs.com/templates for more templates and meta tags -->

<script>var zon = true; // true for comments from zim code</script>
<script src="http://d309knd7es5f10.cloudfront.net/zim_1.5_min.js"></script>
<script src="http://code.createjs.com/createjs-2015.05.21.min.js"></script> 
<!-- should use CDN links available from CreateJS and ZIM sites -->

<style>
	body {margin:0px; padding:0px; background-color:#22637f;}
	#myCanvas {position:absolute; background-color:#22637f;}
</style>

<script>

// SCALING OPTIONS
// "none"		sets canvas and stage to dimensions and does not scale if window changes
// "fit"		sets canvas and stage to dimensions and scales to fit inside window size
// "outside"	sets canvas and stage to dimensions and scales to fit outside window size
// "full"		sets canvas and stage to window size (canvas is actually set to screen size)

var scaling = "full"; // fit scales to fit the browser window while keeping the aspect ratio
var width = 960;
var height = 640;
var frame = new zim.Frame(scaling, width, height); 
frame.on("ready", function() {	
	zog("ready from ZIM Frame");

	
	var stage = frame.stage;
	var stageW = frame.width;
	var stageH = frame.height;
	
	var stitchContainer = new createjs.Container();
	stage.addChild(stitchContainer);
	var fontSize = 16;

	function stitchMaker(){
		var posX = 0;
		var posY = 0;
		var stitch;
		for(i=0; i<((stageW/fontSize + 1)*(stageH/fontSize + 1)); i++){

			if (posX >= stageW){
				posX = 0;
				posY = posY + fontSize;
				stitch = new createjs.Container();
				stage.addChild(stitch);
				// stitch.addChild(new zim.Rectangle(12,16, "#22637f"));
				stitch.addChild(new createjs.Text("X", "16px Arial", "#2980b9"));
				stitch.addEventListener("click", colourChange);
				stitch.x = posX;
				stitch.y = posY;
				posX = posX+fontSize;
				console.log("created");
				console.log(stitch);
			} else {
				stitch = new createjs.Container();
				stage.addChild(stitch);
				// stitch.addChild(new zim.Rectangle(12,16, "#22637f"));
				stitch.addChild(new createjs.Text("X", "bold 16px Arial", "#2980b9"));
				stage.addChild(stitch);
				stitch.addEventListener("click", colourChange);
				stitch.x = posX;
				stitch.y = posY;
				posX = posX+fontSize;
				console.log("created");
			}
		};

			stage.update();
			return stitch;

	};

	var count = 0;
	function colourChange(e){
		console.log("click");

		if(e.currentTarget.getChildAt(0).color == "#2980b9"){
			count = 0;
		} else if(e.currentTarget.getChildAt(0).color == "#FFF"){
			count = 1;
		} else if(e.currentTarget.getChildAt(0).color == "#c16f82"){
			count = 2;
		} else if(e.currentTarget.getChildAt(0).color == "#27ae60"){
			count = 3;
		} else if(e.currentTarget.getChildAt(0).color == "#71b5d3"){
			count = 4;
		} else {
			count = 5;
		}


		switch (count) {
			case 0:
				e.currentTarget.getChildAt(0).color = "#FFF";
				stage.update();
				break;
			case 1:
				e.currentTarget.getChildAt(0).color = "#c16f82";
				stage.update();
				break;
			case 2:
				e.currentTarget.getChildAt(0).color = "#27ae60";
				stage.update();
				break;
			case 3:
				e.currentTarget.getChildAt(0).color = "#71b5d3";
				stage.update();
				break;
			case 4:
				e.currentTarget.getChildAt(0).color = "#f1c40f";
				stage.update();
				break;
			case 5:
				e.currentTarget.getChildAt(0).color = "#2980b9";
				stage.update();
				break;


		}
		
	}
		stitchMaker();
		stage.update();








	});
	
	// making tiles in a lot of these examples
	// so will just include this in each file
	




</script>


</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>

<!-- <img id="ghost" src="images/boo.png"/> -->
</html>
